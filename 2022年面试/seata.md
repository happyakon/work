## seata分布式事务

### 1.什么是Seata?

​    Seata是一个开源的分布式事务解决方案，提供了AT，TCC,SAGA,和XA的事务模式。

### 2.AT如何工作

#### 2.1 前提条件

2.1.1 基于支持本地 ACID 事务的关系型数据库。

2.1.2 Java 应用，通过 JDBC 访问数据库。

#### 2.2 整体机制

##### 2.2.1 一阶段：

业务数据和回滚日志记录在同一个本地事务中提交，释放本地锁和连接资源。

##### 2.2.2 二阶段：

1. 提交异步化，非常快速地完成。

2. 回滚通过一阶段的回滚日志进行反向补偿。

#### 2.3 写隔离

1. 一阶段本地事务提交前，需要确保先拿到 **全局锁** 。

2. 拿不到 **全局锁** ，不能提交本地事务。

3. 拿 **全局锁** 的尝试被限制在一定范围内，超出范围将放弃，并回滚本地事务，释放本地锁。

